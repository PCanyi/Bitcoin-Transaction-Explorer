#{extends 'main.html' /}
#{set title:'BTC Transaction Explorer' /}

#{if tx}
	<div class="transaction">
		Transaction ID: <span id="txID" title="${tx.hash}">${tx.hash}</span>
	</div>
#{/if}
	
<div id="holder" class="universe"></div> 
	
#{if tx}	
	<script type="text/javascript">
		$(document).ready(function(){
			tx = new Transaction("${tx.hash}", "${tx.credit}", getCanvas("holder"));
			tx.x = 500, tx.y = 300;
			tx.init();
		});
	</script>
	
	#{list items:tx.inputs, as:'input'}
		<script type="text/javascript">
			$(document).ready(function(){
				itx = new Transaction("${input.previousTransaction.hash}", null, getCanvas("holder"));
				itx.x = 300, itx.y = (inputCounter++) * 120;
				itx.init();
				connections.push(getCanvas("holder").connection(
						tx.getNode(), itx.getNode(), connectorLineColor, "#000", "${input.scriptSig}"));
			});
		</script>
	#{/list}
			
	#{list items:tx.outputs, as:'output'}
		<script type="text/javascript">
			getOutputTx("${output.scriptPublicKey}");
		</script>
	#{/list}
				
	
#{/if}
#{else}
    No transaction found.
#{/else}